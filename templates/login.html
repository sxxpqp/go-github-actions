<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Xmee | Login and Register Form Html Templates</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/xxx/static/css/bootstrap.min.css">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="/xxx/static/css/fontawesome-all.min.css">
    <!-- Flaticon CSS -->
    <link rel="stylesheet" href="/xxx/static/css/flaticon.css">
    <!-- Google Web Fonts -->
    <link href="/xxx/static/css/css.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/xxx/static/css/style.css">

</head>

<body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div id="preloader" class="preloader">
        <div class='inner'>
            <div class='line1'></div>
            <div class='line2'></div>
            <div class='line3'></div>
        </div>
    </div>
    <section class="fxt-template-animation fxt-template-layout3" data-bg-image="img/figure/bg3-l.jpg">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 col-12 fxt-none-991">
                    <div class="fxt-header">
                        <div class="fxt-transformY-50 fxt-transition-delay-1">
                            <a href="" class="fxt-logo"><img src="/xxx/static/picture/logo-3.png" alt="Logo"></a>
                        </div>
                        <div class="fxt-transformY-50 fxt-transition-delay-2">
                            <h1>Welcome To xmee</h1>
                        </div>
                        <div class="fxt-transformY-50 fxt-transition-delay-3">
                            <p>Grursus mal suada faci lisis Lorem ipsum dolarorit more ametion consectetur elit. Vesti at bulum nec odio aea the dumm ipsumm ipsum that dolocons rsus mal suada and fadolorit to the dummy consectetur elit the Lorem Ipsum genera.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-12 fxt-bg-color">
                    <div class="fxt-content">
                        <div class="fxt-form">
                            <h2>Login</h2>
                            <p class="mb-5">Login into your pages account</p>
                            <form id="myform" >
                                <div class="form-group">
                                    <label for="email" class="input-label">Email Address</label>
                                    <input type="email" id="email" class="form-control" name="email" placeholder="demo@gmail.com" required="required">
                                </div>
                                <div class="form-group">
                                    <label for="password" class="input-label">Password</label>
                                    <input id="password" type="password" class="form-control" name="password" placeholder="********" required="required">
                                    <i toggle="#password" class="fa fa-fw fa-eye toggle-password field-icon"></i>
                                </div>
                                <div class="form-group">
                                    <div class="fxt-checkbox-area">
                                        <div class="checkbox">
                                            <input id="checkbox1" type="checkbox">
                                            <label for="checkbox1">Keep me logged in</label>
                                        </div>
                                        <a href="forgot-password-3.html" class="switcher-text">Forgot Password</a>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="fxt-btn-fill">Log in</button>
                                </div>
                            </form>
                        </div>
                        <div class="fxt-style-line">
                            <h3>Or Login With Email</h3>
                        </div>
                        <ul class="fxt-socials">
                            <li class="fxt-facebook"><a href="#" title="Facebook">Twitter</a></li>
                            <li class="fxt-twitter"><a href="#" title="twitter">Facebook</a></li>
                            <li class="fxt-google"><a href="#" title="google">Google +</a></li>
                            <li class="fxt-linkedin"><a href="#" title="linkedin">Linkedin</a></li>
                        </ul>
                        <div class="fxt-footer">
                            <p>Don't have an account?<a href="register" class="switcher-text2 inline-text">Register</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- jquery-->
    <script src="/xxx/static/js/jquery-3.5.0.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/xxx/static/js/bootstrap.min.js"></script>
    <!-- Imagesloaded js -->
    <script src="/xxx/static/js/imagesloaded.pkgd.min.js"></script>
    <!-- Validator js -->
    <script src="/xxx/static/js/validator.min.js"></script>
    <!-- Custom Js -->
    <script src="/xxx/static/js/main.js"></script>
    <script>
        // 用于显示/隐藏密码的函数
        function togglePassword() {
            const passwordField = document.getElementById('password');
            const toggleIcon = document.querySelector('.toggle-password');
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleIcon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                toggleIcon.classList.remove('fa-eye-slash');
            }
        }
document.getElementById("myform").addEventListener("submit",handleSubmit);
        // 用于处理表单提交的函数
        function handleSubmit(event) {
            event.preventDefault(); // 阻止默认表单提交

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            console.log('Email:', email);  // 打印 email
            console.log('Password:', password);  // 打印 password

            fetch('http://localhost:8080/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
            })
                .then(response => response.json())
                .then(data => {
                    if (data.token) {
                        // 登录成功，保存 token 到 localStorage
                        localStorage.setItem('token', data.token);
                        document.cookie = "token=" + data.token + "; path=/;";
                        alert('Login successful! Token saved.');
                        console.log('Token saved:', data.token);
                    } else {
                        // 登录失败，显示错误信息
                        alert('Login failed. Please check your credentials.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred during login.');
                });
        }

    </script>


</body>

</html>